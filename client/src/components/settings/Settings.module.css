.overlay{position:fixed;inset:0;background:var(--shadow-dark);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}
.modal{background:var(--color-surface);border:1px solid var(--color-border);border-radius:16px;width:100%;max-width:512px;box-shadow:0 25px 50px -12px var(--shadow-dark)}
.header{display:flex;align-items:center;justify-content:space-between;padding:24px;border-bottom:1px solid var(--color-border)}
.title{font-family:var(--font-family-heading);font-size:1.5rem;font-weight:bold;color:var(--color-text);margin:0}
.subtitle{font-size:.875rem;color:var(--color-text-muted);margin-top:4px}
.close-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:12px;color:var(--color-text-muted);background:transparent;border:none;cursor:pointer}
.body{padding:24px}
.section{margin-bottom:24px}
.section-title{font-size:1rem;font-weight:600;color:var(--color-text);margin:0 0 8px}
.tag-form{display:flex;gap:8px;margin-bottom:24px}
.relative{position:relative}
.grid{display:grid;grid-template-columns:1fr;gap:16px}
.row{display:flex;gap:8px;align-items:center}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text)}
.btn{padding:8px 12px;border-radius:10px;border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text)}
.btn-primary{border:1px solid var(--color-primary);background:var(--color-primary);color:var(--color-bg)}
.section-border{border-top:1px solid var(--color-border)}
.pad-24{padding:24px}
.mb-24{margin-bottom:24px}
.h3{font-size:1.1rem;font-weight:700;color:var(--color-text);margin:0}
.form-inline{display:flex;gap:8px;margin-bottom:24px}
.swatch{width:20px;height:20px;border-radius:6px;border:1px solid var(--color-border);background:var(--color-surface)}
.swatch-color{background:var(--swatch-color)}
.tag-item{display:flex;align-items:center;justify-content:space-between;padding:12px;border:1px solid var(--color-border);border-radius:10px;background:var(--color-surface)}
.tag-actions{display:flex;gap:8px;align-items:center}

/* Tabs */
.tabs{display:flex;gap:8px;padding:12px 24px;border-bottom:1px solid var(--color-border);background:var(--color-surface-light)}
.tab{padding:8px 16px;border:none;border-radius:8px;background:transparent;color:var(--color-text-muted);font-weight:500;font-size:.875rem;cursor:pointer;transition:all .3s}
.tab-active{padding:8px 16px;border:none;border-radius:8px;background:var(--color-primary);color:var(--color-bg);font-weight:500;font-size:.875rem}

/* Inputs */
.text-input{flex:1;background:var(--color-surface-light);border:1px solid var(--color-border);border-radius:12px;padding:10px 16px;color:var(--color-text);font-family:var(--font-family-base);outline:none;transition:border-color .3s}
.color-input{width:48px;height:100%;border-radius:12px;cursor:pointer;border:2px solid var(--color-border);transition:border-color .3s;padding:0;background:transparent}
.submit-btn{padding:10px 24px;background:var(--color-primary);border-radius:12px;color:var(--color-bg);font-weight:500;font-size:.875rem;border:none;cursor:pointer;transition:all .3s;box-shadow:0 10px 15px -3px var(--shadow-primary)}
.spinner{width:20px;height:20px;border:2px solid var(--color-surface);border-top-color:var(--color-bg);border-radius:50%;animation:spin 1s linear infinite}

@keyframes spin{to{transform:rotate(360deg)}}

/* Lists */
.list{display:flex;flex-direction:column;gap:8px;max-height:256px;overflow-y:auto;padding-right:8px}
.empty{text-align:center;padding:32px 0}
.empty-icon{font-size:2.25rem;margin-bottom:8px;color:var(--color-text-muted)}
.empty-text{color:var(--color-text-muted);font-size:.875rem}
.tag-item-surface{display:flex;align-items:center;justify-content:space-between;padding:12px;background:var(--color-surface-light);border-radius:12px;border:1px solid var(--color-border);transition:border-color .3s;gap:8px}
.edit-row{display:flex;align-items:center;gap:8px;flex:1}
.actions{display:flex;gap:4px;opacity:0}
.row{display:flex;align-items:center;gap:12px;flex:1}
.tag-name{font-family:var(--font-family-base);color:var(--color-text);font-weight:500}

/* Panels and forms */
.section-subtitle{color:var(--color-text-muted);margin-bottom:12px}
.panel{padding:16px;background:var(--color-surface-light);border-radius:12px;border:1px solid var(--color-border)}
.form-group{margin-bottom:16px}
.label{display:block;font-size:.875rem;font-weight:500;color:var(--color-text);margin-bottom:8px}
.select{width:100%;padding:10px 16px;padding-right:32px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;color:var(--color-text);font-size:.875rem;cursor:pointer;outline:none;transition:border-color .3s}
.range{width:100%;cursor:pointer}

/* Hover reveal for tag actions */
.tag-item-surface:hover .actions{opacity:1 !important}

/* Misc */
.kbd{padding:4px 8px;background:var(--color-surface-light);border-radius:4px;font-size:.75rem;border:1px solid var(--color-border);font-family:inherit}

/* Responsive breakpoints */
@media (--md){
	.modal{max-width:540px}
	.header{padding:20px}
	.body{padding:20px}
}

@media (--sm){
	.overlay{padding:0}
	.modal{max-width:none;width:100%;border-radius:0}
	.header{padding:16px;padding-top:calc(16px + env(safe-area-inset-top));}
	.body{padding:16px;padding-bottom:calc(16px + env(safe-area-inset-bottom));}
	.tabs{padding:12px 16px}
}

/* Landscape height adjustments for iPhone 15 family */
@media (max-height: 430px){
	.header{padding-top:calc(12px + env(safe-area-inset-top));padding-bottom:12px}
	.body{padding-top:12px;padding-bottom:calc(12px + env(safe-area-inset-bottom))}
}